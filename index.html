<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Latest News | AI & BI News</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root { --bg: #ffffff; --text: #111; --text-secondary: #666; --text-muted: #999; --border: #eaeaea; --hover: #fafafa; }
        body { font-family: 'Inter', -apple-system, sans-serif; background: var(--bg); color: var(--text); line-height: 1.6; -webkit-font-smoothing: antialiased; }
        .page-wrapper { max-width: 900px; margin: 0 auto; padding: 0 24px; }
        
        .top-nav { border-bottom: 1px solid var(--border); padding: 20px 0; margin-bottom: 48px; }
        .top-nav-inner { max-width: 900px; margin: 0 auto; padding: 0 24px; display: flex; justify-content: space-between; align-items: center; }
        .logo { font-size: 0.75rem; font-weight: 600; letter-spacing: 0.15em; text-transform: uppercase; text-decoration: none; color: var(--text); }
        .nav-links { display: flex; gap: 32px; }
        .nav-links a { font-size: 0.85rem; color: var(--text-muted); text-decoration: none; padding: 4px 0; position: relative; transition: color 0.2s; }
        .nav-links a:hover { color: var(--text); }
        .nav-links a.active { color: var(--text); font-weight: 500; }
        .nav-links a.active::after { content: ''; position: absolute; bottom: -4px; left: 0; right: 0; height: 2px; background: var(--text); }
        
        header { padding: 0 0 40px; }
        .hero-title { font-size: clamp(2rem, 5vw, 3rem); font-weight: 700; letter-spacing: -0.03em; line-height: 1.1; margin-bottom: 12px; }
        .hero-subtitle { font-size: 1rem; color: var(--text-secondary); }
        
        .filters { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 24px; }
        .filter { padding: 8px 16px; font-size: 0.8rem; background: var(--hover); border: 1px solid var(--border); border-radius: 20px; cursor: pointer; color: var(--text-secondary); transition: all 0.2s; }
        .filter:hover { border-color: var(--text-muted); }
        .filter.active { background: var(--text); color: white; border-color: var(--text); }
        
        .search-wrapper { margin-bottom: 32px; }
        .search-input { width: 100%; max-width: 400px; padding: 12px 16px; background: var(--hover); border: 1px solid var(--border); border-radius: 8px; font-size: 0.85rem; font-family: inherit; color: var(--text); outline: none; }
        .search-input:focus { border-color: var(--text-muted); }
        
        .articles { display: grid; gap: 0; }
        .article { padding: 24px 0; border-bottom: 1px solid var(--border); cursor: pointer; transition: opacity 0.2s; }
        .article:hover { opacity: 0.7; }
        .article-meta { display: flex; align-items: center; gap: 12px; margin-bottom: 8px; font-size: 0.75rem; }
        .article-source { padding: 3px 8px; background: var(--hover); border-radius: 4px; font-weight: 500; color: var(--text-secondary); }
        .article-date { color: var(--text-muted); }
        .article-title { font-size: 1.1rem; font-weight: 600; color: var(--text); line-height: 1.4; margin-bottom: 8px; }
        .article-desc { font-size: 0.9rem; color: var(--text-secondary); line-height: 1.6; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
        
        .loading, .empty-state { text-align: center; padding: 60px 20px; color: var(--text-muted); }
        footer { margin-top: 80px; padding: 40px 0; border-top: 1px solid var(--border); text-align: center; font-size: 0.75rem; color: var(--text-muted); }
        
        @media (max-width: 600px) { .nav-links { gap: 20px; } .nav-links a { font-size: 0.8rem; } }
    </style>
</head>
<body>
    <nav class="top-nav">
        <div class="top-nav-inner">
            <a href="index.html" class="logo">AI & BI News</a>
            <div class="nav-links">
                <a href="index.html" class="active">News</a>
                <a href="ai-tools.html">AI Tools</a>
                <a href="certifications.html">Certifications</a>
            </div>
        </div>
    </nav>

    <div class="page-wrapper">
        <header>
            <h1 class="hero-title">Latest News</h1>
            <p class="hero-subtitle">Updates from Power BI, Microsoft Fabric, and OpenAI</p>
        </header>

        <main>
            <div class="filters" id="filters">
                <button class="filter active" data-source="all">All</button>
                <button class="filter" data-source="powerbi">Power BI</button>
                <button class="filter" data-source="fabric">Microsoft Fabric</button>
                <button class="filter" data-source="openai">OpenAI</button>
            </div>

            <div class="search-wrapper">
                <input type="text" class="search-input" id="search" placeholder="Search articles...">
            </div>

            <div class="loading" id="loading">Loading news...</div>
            <div class="articles" id="articles"></div>
            <div class="empty-state" id="empty" style="display:none;">No articles found.</div>
        </main>

        <footer>
            <p>AI & BI News â€” Powered by n8n</p>
        </footer>
    </div>

    <script>
        let articles = [], currentSource = 'all', searchQuery = '';

        fetch('news.json?' + Date.now())
            .then(r => r.json())
            .then(data => {
                articles = data.sort((a, b) => new Date(b.pubDate) - new Date(a.pubDate));
                document.getElementById('loading').style.display = 'none';
                render();
            })
            .catch(() => {
                document.getElementById('loading').textContent = 'Unable to load news.';
            });

        function render() {
            let filtered = articles;
            if (currentSource !== 'all') filtered = filtered.filter(a => a.source === currentSource);
            if (searchQuery) filtered = filtered.filter(a => a.title.toLowerCase().includes(searchQuery) || (a.description && a.description.toLowerCase().includes(searchQuery)));

            const container = document.getElementById('articles');
            const empty = document.getElementById('empty');

            if (!filtered.length) { container.innerHTML = ''; empty.style.display = 'block'; return; }
            empty.style.display = 'none';

            container.innerHTML = filtered.map(article => {
                const date = new Date(article.pubDate).toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
                const sourceLabel = article.source === 'powerbi' ? 'Power BI' : article.source === 'fabric' ? 'Fabric' : 'OpenAI';
                return `<article class="article" onclick="window.open('${article.link}', '_blank')">
                    <div class="article-meta"><span class="article-source">${sourceLabel}</span><span class="article-date">${date}</span></div>
                    <h2 class="article-title">${article.title}</h2>
                    <p class="article-desc">${article.description || ''}</p>
                </article>`;
            }).join('');
        }

        document.getElementById('filters').addEventListener('click', e => {
            if (e.target.classList.contains('filter')) {
                document.querySelectorAll('.filter').forEach(f => f.classList.remove('active'));
                e.target.classList.add('active');
                currentSource = e.target.dataset.source;
                render();
            }
        });
        document.getElementById('search').addEventListener('input', e => { searchQuery = e.target.value.toLowerCase(); render(); });
    </script>
    <script src="chat-widget.js"></script>
</body>
</html>
