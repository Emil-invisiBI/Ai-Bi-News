<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI & BI News</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root { --bg: #ffffff; --text: #111; --text-secondary: #666; --text-muted: #999; --border: #eaeaea; --hover: #fafafa; --accent: #000; }
        body { font-family: 'Inter', -apple-system, sans-serif; background: var(--bg); color: var(--text); line-height: 1.6; -webkit-font-smoothing: antialiased; }
        .page-wrapper { max-width: 1200px; margin: 0 auto; padding: 0 24px; }
        header { padding: 60px 0 40px; max-width: 900px; }
        .header-top { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 48px; }
        .logo { font-size: 0.75rem; font-weight: 600; letter-spacing: 0.15em; text-transform: uppercase; }
        .header-date { font-size: 0.75rem; color: var(--text-muted); }
        .hero-title { font-size: clamp(2.5rem, 6vw, 4rem); font-weight: 700; letter-spacing: -0.03em; line-height: 1.1; margin-bottom: 16px; }
        .hero-subtitle { font-size: 1.1rem; color: var(--text-secondary); max-width: 500px; }
        .main-layout { display: grid; grid-template-columns: 220px 1fr; gap: 48px; }
        .sidebar { position: sticky; top: 24px; height: fit-content; }
        .sidebar-section { margin-bottom: 28px; }
        .sidebar-title { font-size: 0.7rem; font-weight: 600; letter-spacing: 0.1em; text-transform: uppercase; color: var(--text-muted); margin-bottom: 12px; }
        .sidebar-list { list-style: none; }
        .sidebar-list li { margin-bottom: 2px; }
        .sidebar-list a { display: flex; justify-content: space-between; align-items: center; padding: 8px 12px; font-size: 0.85rem; color: var(--text-secondary); text-decoration: none; border-radius: 6px; transition: all 0.15s; cursor: pointer; }
        .sidebar-list a:hover { background: var(--hover); color: var(--text); }
        .sidebar-list a.active { background: var(--text); color: white; }
        .sidebar-count { font-size: 0.75rem; color: var(--text-muted); }
        .sidebar-list a.active .sidebar-count { color: rgba(255,255,255,0.7); }
        .year-group { margin-bottom: 4px; }
        .year-header { display: flex; justify-content: space-between; align-items: center; padding: 8px 12px; font-size: 0.85rem; font-weight: 600; color: var(--text); cursor: pointer; border-radius: 6px; transition: background 0.15s; user-select: none; }
        .year-header:hover { background: var(--hover); }
        .year-header .arrow { font-size: 0.6rem; transition: transform 0.2s; }
        .year-header.open .arrow { transform: rotate(180deg); }
        .year-months { display: none; padding-left: 12px; }
        .year-months.open { display: block; }
        .year-months a { padding: 6px 12px; font-size: 0.8rem; }
        .main-content { min-width: 0; }
        .nav-wrapper { border-top: 1px solid var(--border); border-bottom: 1px solid var(--border); margin-bottom: 32px; }
        nav { display: flex; gap: 0; overflow-x: auto; }
        nav a { font-size: 0.8rem; font-weight: 500; color: var(--text-muted); text-decoration: none; padding: 16px 24px; white-space: nowrap; position: relative; transition: color 0.2s; cursor: pointer; }
        nav a:first-child { padding-left: 0; }
        nav a:hover { color: var(--text); }
        nav a.active { color: var(--text); }
        nav a.active::after { content: ''; position: absolute; bottom: -1px; left: 0; right: 0; height: 2px; background: var(--accent); }
        .search-wrapper { margin-bottom: 32px; }
        .search-input { width: 100%; padding: 14px 18px; background: var(--hover); border: none; border-radius: 10px; font-size: 0.9rem; font-family: inherit; color: var(--text); outline: none; }
        .search-input:focus { box-shadow: 0 0 0 2px var(--border); }
        .search-input::placeholder { color: var(--text-muted); }
        .featured { margin-bottom: 48px; cursor: pointer; }
        .featured-label { font-size: 0.7rem; font-weight: 600; letter-spacing: 0.1em; text-transform: uppercase; color: var(--text-muted); margin-bottom: 16px; }
        .featured-title { font-size: clamp(1.5rem, 4vw, 2rem); font-weight: 700; letter-spacing: -0.02em; line-height: 1.2; margin-bottom: 12px; transition: opacity 0.2s; }
        .featured:hover .featured-title { opacity: 0.7; }
        .featured-desc { font-size: 1rem; color: var(--text-secondary); line-height: 1.6; margin-bottom: 12px; max-width: 600px; }
        .featured-meta { display: flex; gap: 16px; font-size: 0.8rem; color: var(--text-muted); }
        .featured-source { font-weight: 500; color: var(--text-secondary); }
        .section-label { font-size: 0.7rem; font-weight: 600; letter-spacing: 0.1em; text-transform: uppercase; color: var(--text-muted); margin-bottom: 20px; padding-bottom: 12px; border-bottom: 1px solid var(--border); }
        .articles { display: grid; gap: 0; }
        .article { display: grid; grid-template-columns: 1fr auto; gap: 24px; align-items: start; padding: 20px 0; border-bottom: 1px solid var(--border); cursor: pointer; transition: opacity 0.2s; }
        .article:hover { opacity: 0.6; }
        .article-content { min-width: 0; }
        .article-meta { display: flex; align-items: center; gap: 12px; margin-bottom: 6px; font-size: 0.75rem; }
        .article-source { color: var(--text-secondary); font-weight: 500; }
        .article-date { color: var(--text-muted); }
        .article-title { font-size: 1rem; font-weight: 600; color: var(--text); line-height: 1.4; margin-bottom: 6px; }
        .article-desc { font-size: 0.85rem; color: var(--text-secondary); line-height: 1.5; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
        .article-number { font-size: 0.75rem; font-weight: 600; color: var(--text-muted); }
        .loading, .empty-state { text-align: center; padding: 60px 20px; color: var(--text-muted); }
        footer { margin-top: 80px; padding: 40px 0; border-top: 1px solid var(--border); display: flex; justify-content: space-between; font-size: 0.75rem; color: var(--text-muted); }
        .footer-links { display: flex; gap: 24px; }
        .footer-links a { color: var(--text-muted); text-decoration: none; }
        .footer-links a:hover { color: var(--text); }
        .cert-card { background: var(--hover); border-radius: 8px; padding: 12px; margin-bottom: 8px; cursor: pointer; transition: all 0.2s; border: 1px solid transparent; }
        .cert-card:hover { border-color: var(--border); transform: translateY(-1px); }
        .cert-code { font-size: 0.7rem; font-weight: 600; color: var(--text-muted); letter-spacing: 0.05em; margin-bottom: 4px; }
        .cert-name { font-size: 0.8rem; font-weight: 600; color: var(--text); line-height: 1.3; margin-bottom: 6px; }
        .cert-desc { font-size: 0.7rem; color: var(--text-secondary); line-height: 1.4; }
        .cert-badge { display: inline-block; font-size: 0.6rem; font-weight: 600; padding: 2px 6px; border-radius: 4px; margin-top: 8px; }
        .cert-badge.data { background: #e3f2fd; color: #1565c0; }
        .cert-badge.fabric { background: #fce4ec; color: #c62828; }
        .cert-badge.ai { background: #e8f5e9; color: #2e7d32; }
        @media (max-width: 800px) { .main-layout { grid-template-columns: 1fr; } .sidebar { position: static; } .article { grid-template-columns: 1fr; } .article-number { display: none; } footer { flex-direction: column; gap: 16px; text-align: center; } }
    </style>
</head>
<body>
    <div class="page-wrapper">
        <header>
            <div class="header-top">
                <div class="logo">AI & BI News</div>
                <div class="header-date" id="currentDate"></div>
            </div>
            <h1 class="hero-title">The latest in Data<br>& Intelligence</h1>
            <p class="hero-subtitle">Curated news from Power BI, Microsoft Fabric, and AI. Updated via n8n.</p>
        </header>
        <div class="main-layout">
            <aside class="sidebar">
                <div class="sidebar-section">
                    <div class="sidebar-title">Sources</div>
                    <ul class="sidebar-list" id="sourceList"></ul>
                </div>
                <div class="sidebar-section">
                    <div class="sidebar-title">Archive</div>
                    <div id="archiveList"></div>
                </div>
                <div class="sidebar-section">
                    <div class="sidebar-title">Certifications</div>
                    <div class="cert-card" onclick="window.open('https://learn.microsoft.com/en-us/credentials/certifications/azure-database-administrator-associate/')">
                        <div class="cert-code">DP-300</div>
                        <div class="cert-name">Azure Database Administrator</div>
                        <div class="cert-desc">Administer SQL Server, Azure SQL, and hybrid data platforms. Covers backup, security, monitoring & optimization.</div>
                        <span class="cert-badge data">Data Platform</span>
                    </div>
                    <div class="cert-card" onclick="window.open('https://learn.microsoft.com/en-us/credentials/certifications/fabric-analytics-engineer-associate/')">
                        <div class="cert-code">DP-600</div>
                        <div class="cert-name">Fabric Analytics Engineer</div>
                        <div class="cert-desc">Design and implement analytics solutions using Microsoft Fabric. Covers lakehouses, warehouses, notebooks & semantic models.</div>
                        <span class="cert-badge fabric">Fabric</span>
                    </div>
                    <div class="cert-card" onclick="window.open('https://learn.microsoft.com/en-us/credentials/certifications/power-bi-data-analyst-associate/')">
                        <div class="cert-code">PL-300</div>
                        <div class="cert-name">Power BI Data Analyst</div>
                        <div class="cert-desc">Create reports & dashboards in Power BI. Covers data modeling, DAX, visualization & deployment.</div>
                        <span class="cert-badge data">Power BI</span>
                    </div>
                    <div class="cert-card" onclick="window.open('https://learn.microsoft.com/en-us/credentials/certifications/azure-ai-engineer/')">
                        <div class="cert-code">AI-102</div>
                        <div class="cert-name">Azure AI Engineer</div>
                        <div class="cert-desc">Build AI solutions with Azure Cognitive Services, Azure OpenAI, and knowledge mining.</div>
                        <span class="cert-badge ai">AI & ML</span>
                    </div>
                </div>
            </aside>
            <main class="main-content">
                <div class="nav-wrapper">
                    <nav id="nav">
                        <a class="active" data-category="all">All Stories</a>
                        <a data-category="powerbi">Power BI</a>
                        <a data-category="fabric">Microsoft Fabric</a>
                        <a data-category="ai">AI & ML</a>
                    </nav>
                </div>
                <div class="search-wrapper">
                    <input type="text" class="search-input" id="search" placeholder="Search articles...">
                </div>
                <div class="loading" id="loading">Loading...</div>
                <div id="featured" style="display:none;"></div>
                <div id="articlesSection" style="display:none;">
                    <div class="section-label">Latest Articles</div>
                    <div class="articles" id="articles"></div>
                </div>
                <div class="empty-state" id="emptyState" style="display:none;">No articles found.</div>
            </main>
        </div>
        <footer>
            <div>Powered by n8n automation</div>
            <div class="footer-links">
                <a href="#">Power BI</a>
                <a href="#">Fabric</a>
                <a href="#">OpenAI</a>
            </div>
        </footer>
    </div>
    <script>
        document.getElementById('currentDate').textContent = new Date().toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
        var newsData = [], currentCategory = 'all', currentMonth = 'all', currentSource = 'all', searchQuery = '';

        function loadNews() {
            fetch('news.json?' + Date.now()).then(function(r) { return r.json(); }).then(function(data) {
                newsData = Array.isArray(data) ? data : (data.articles || []);
                document.getElementById('loading').style.display = 'none';
                buildSidebar();
                renderNews();
            }).catch(function() { document.getElementById('loading').textContent = 'Unable to load.'; });
        }

        function buildSidebar() {
            var sources = {};
            newsData.forEach(function(item) {
                if (!sources[item.source]) sources[item.source] = 0;
                sources[item.source]++;
            });
            var sh = '<li><a class="' + (currentSource === 'all' ? 'active' : '') + '" data-source="all">All<span class="sidebar-count">' + newsData.length + '</span></a></li>';
            Object.keys(sources).forEach(function(k) { sh += '<li><a class="' + (currentSource === k ? 'active' : '') + '" data-source="' + k + '">' + k + '<span class="sidebar-count">' + sources[k] + '</span></a></li>'; });
            document.getElementById('sourceList').innerHTML = sh;
            updateArchive();
        }

        function updateArchive() {
            var filtered = newsData.filter(function(item) {
                return currentSource === 'all' || item.source === currentSource;
            });
            var years = {}, total = filtered.length;
            filtered.forEach(function(item) {
                var d = new Date(item.date), year = d.getFullYear(), monthKey = year + '-' + String(d.getMonth() + 1).padStart(2, '0');
                var monthLabel = d.toLocaleDateString('en-US', { month: 'short' });
                if (!years[year]) years[year] = {};
                if (!years[year][monthKey]) years[year][monthKey] = { label: monthLabel, count: 0 };
                years[year][monthKey].count++;
            });
            var html = '<ul class="sidebar-list"><li><a class="' + (currentMonth === 'all' ? 'active' : '') + '" data-month="all">All time<span class="sidebar-count">' + total + '</span></a></li></ul>';
            Object.keys(years).sort().reverse().forEach(function(year, idx) {
                var yc = 0; Object.values(years[year]).forEach(function(m) { yc += m.count; });
                html += '<div class="year-group"><div class="year-header">' + year + ' <span class="sidebar-count">' + yc + '</span><span class="arrow">â–¼</span></div>';
                html += '<ul class="sidebar-list year-months">';
                Object.keys(years[year]).sort().reverse().forEach(function(mk) {
                    html += '<li><a class="' + (currentMonth === mk ? 'active' : '') + '" data-month="' + mk + '">' + years[year][mk].label + '<span class="sidebar-count">' + years[year][mk].count + '</span></a></li>';
                });
                html += '</ul></div>';
            });
            document.getElementById('archiveList').innerHTML = html;
            document.querySelectorAll('.year-header').forEach(function(h) {
                h.onclick = function() { this.classList.toggle('open'); this.nextElementSibling.classList.toggle('open'); };
            });
        }

        function formatDate(ds) {
            var d = new Date(ds), h = Math.floor((new Date() - d) / 3600000);
            if (h < 1) return 'Just now'; if (h < 24) return h + 'h ago'; if (h < 48) return 'Yesterday';
            return d.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
        }

        function renderNews() {
            var filtered = newsData.filter(function(item) {
                var mc = currentCategory === 'all' || item.category === currentCategory;
                var ms = !searchQuery || item.title.toLowerCase().includes(searchQuery) || (item.description || '').toLowerCase().includes(searchQuery);
                var mm = currentMonth === 'all' || (new Date(item.date).getFullYear() + '-' + String(new Date(item.date).getMonth() + 1).padStart(2, '0')) === currentMonth;
                var mso = currentSource === 'all' || item.source === currentSource;
                return mc && ms && mm && mso;
            });
            var fe = document.getElementById('featured'), se = document.getElementById('articlesSection'), ae = document.getElementById('articles'), ee = document.getElementById('emptyState');
            if (!filtered.length) { fe.style.display = se.style.display = 'none'; ee.style.display = 'block'; return; }
            ee.style.display = 'none';
            var f = filtered[0];
            fe.style.display = 'block';
            fe.innerHTML = '<div class="featured" onclick="window.open(\'' + f.url + '\')"><div class="featured-label">Featured</div><h2 class="featured-title">' + f.title + '</h2><p class="featured-desc">' + (f.description || '') + '</p><div class="featured-meta"><span class="featured-source">' + f.source + '</span><span>' + formatDate(f.date) + '</span></div></div>';
            if (filtered.length > 1) {
                se.style.display = 'block';
                var h = '';
                for (var i = 1; i < filtered.length; i++) {
                    var it = filtered[i];
                    h += '<div class="article" onclick="window.open(\'' + it.url + '\')"><div class="article-content"><div class="article-meta"><span class="article-source">' + it.source + '</span><span class="article-date">' + formatDate(it.date) + '</span></div><h3 class="article-title">' + it.title + '</h3><p class="article-desc">' + (it.description || '') + '</p></div><div class="article-number">' + String(i).padStart(2, '0') + '</div></div>';
                }
                ae.innerHTML = h;
            } else { se.style.display = 'none'; }
        }

        document.getElementById('nav').onclick = function(e) { if (e.target.tagName === 'A') { document.querySelectorAll('nav a').forEach(function(a) { a.classList.remove('active'); }); e.target.classList.add('active'); currentCategory = e.target.dataset.category; renderNews(); } };
        document.getElementById('archiveList').onclick = function(e) { var l = e.target.closest('a'); if (l && l.dataset.month !== undefined) { document.querySelectorAll('#archiveList a').forEach(function(a) { a.classList.remove('active'); }); l.classList.add('active'); currentMonth = l.dataset.month; renderNews(); } };
        document.getElementById('sourceList').onclick = function(e) { var l = e.target.closest('a'); if (l) { document.querySelectorAll('#sourceList a').forEach(function(a) { a.classList.remove('active'); }); l.classList.add('active'); currentSource = l.dataset.source; currentMonth = 'all'; updateArchive(); renderNews(); } };
        document.getElementById('search').oninput = function(e) { searchQuery = e.target.value.toLowerCase(); renderNews(); };
        loadNews();
    </script>
</body>
</html>
